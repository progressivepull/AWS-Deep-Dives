# 6.5 Creating a VPC 
 
# 🏗️ Objective: Build a Custom VPC with Public & Private Subnets
**Goal:** 
Create a secure, manually configured VPC with:

* Public subnet (internet-facing)

* Private subnet (internet-restricted)

* Internet Gateway (IGW)

* NAT Gateway (for outbound internet access from private subnet)

* Route tables and EC2 instances for validation

# 🧱 VPC Architecture

| Component        | Configuration                                                             |
|------------------|---------------------------------------------------------------------------|
| VPC CIDR Block   | 10.0.0.0/16                                                                |
| Public Subnet    | 10.0.0.0/24 in AZ 1A (auto-assign public IP enabled)                      |
| Private Subnet   | 10.0.1.0/24 in AZ 1B (auto-assign public IP disabled)                     |
| Internet Gateway | Created and attached to VPC                                               |
| NAT Gateway      | Created in public subnet with Elastic IP                                 |
| Route Tables     | Main route table for public subnet; custom route table for private subnet |

# 🔄 Routing Configuration

| Subnet         | Route Table         | Default Route Target |
|----------------|---------------------|-----------------------|
| Public Subnet  | Main Route Table    | Internet Gateway      |
| Private Subnet | Custom Route Table  | NAT Gateway           |

* **Local route** (10.0.0.0/16) allows internal communication

* **Default route** (0.0.0.0/0) directs external traffic appropriately

# 🚀 EC2 Instance Deployment

| Instance | Subnet       | IP Type           | Connectivity                          |
|----------|--------------|-------------------|----------------------------------------|
| Public   | 10.0.0.0/24  | Public + Private  | Full internet access via IGW           |
| Private  | 10.0.1.0/24  | Private only      | Outbound internet via NAT Gateway      |

* **Security Group:** SSH-only access from anywhere

* **Validation:**

    - Public instance: curl ifconfig.co shows public IP

    - Private instance: curl ifconfig.co shows NAT Gateway’s Elastic IP

    - Both can ping external sites (e.g., google.com)

    - Private instance is not directly accessible from the internet

# 🔐 Key Security Behavior
* **Private subnet instances** are hidden behind NAT Gateway

* **No inbound connections** allowed to private IPs via NAT

* **Outbound access** is permitted for updates, patches, etc.

# 🧠 Summary of Actions Taken
1. Created a VPC with CIDR 10.0.0.0/16

2. Created two subnets: public (10.0.0.0/24) and private (10.0.1.0/24)

3. Enabled auto-assign public IP for public subnet

4. Created and attached an Internet Gateway

5. Created a NAT Gateway in the public subnet with an Elastic IP

6. Configured route tables:

    - Public subnet uses main route table → IGW

    - Private subnet uses custom route table → NAT Gateway

7. Launched EC2 instances in both subnets and validated connectivity


 ## [Context](./../context.md)