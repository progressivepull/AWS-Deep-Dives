# 22.6 Using EventBridge 

![aws_console.jpg)](./IMAGES/22.6_Using_EventBridge/aws_console.jpg)
 
- **Purpose of the Example**
  - Demonstrates using **Amazon EventBridge** to trigger actions based on events
  - Shows a real-world, time-based automation use case

- **Use Case Overview**
  - Send a daily email at **4:00 PM Eastern Time**
  - Email contains the **closing price of Tesla (TSLA) stock**
  - Fully automated using AWS services

- **Services Used**
  - **Amazon EventBridge** (formerly CloudWatch Events)
  - **AWS Lambda**
  - **Amazon SNS (Simple Notification Service)**
  - Email subscription to SNS topic

- **EventBridge Configuration**
![event_brdge_homepage.jpg](./IMAGES/22.6_Using_EventBridge/event_brdge_homepage.jpg)

![events_rules.jpg](./IMAGES/22.6_Using_EventBridge/events_rules.jpg)

![create_rules.jpg](./IMAGES/22.6_Using_EventBridge/create_rules.jpg)

![cron_expression.jpg](./IMAGES/22.6_Using_EventBridge/cron_expression.jpg)



  - Created a **rule** using a **Cron expression**

  ![target_lambda_function.jpg](./IMAGES/22.6_Using_EventBridge/target_lambda_function.jpg)

  - Rule triggers daily at the specified hour

![lamdba_function.jpg](./IMAGES/22.6_Using_EventBridge/lamdba_function.jpg)

![lambda_funstion_code.jpg](./IMAGES/22.6_Using_EventBridge/lambda_funstion_code.jpg)

![lambda_funtion_code_2.jpg](./IMAGES/22.6_Using_EventBridge/lambda_funtion_code_2.jpgg)


  - Rule target is a Lambda function

- **Cron-Based Scheduling**
  - Uses Cron syntax to define time-based execution
  - Rule evaluates continuously and triggers when conditions are met

- **Lambda Function**
  - Triggered by EventBridge
  - Queries an external API to retrieve TSLA stock data
  - Extracts open, high, low, and close values
  - Formats the data into a message
  - Publishes the message to an SNS topic

- **SNS Integration**

![email.jpg](./IMAGES/22.6_Using_EventBridge/email.jpg)
  - SNS topic configured with an **email subscription**
  - Lambda function publishes messages to the topic
  - Email is delivered automatically to the subscriber

- **IAM Permissions**

![lambda_permissions.jpg](./IMAGES/22.6_Using_EventBridge/lambda_permissions.jpg)
  - Lambda function uses an IAM role
  - Role includes permission to publish to SNS

![full_SNS-permisions.jpg](./IMAGES/22.6_Using_EventBridge/full_SNS-permisions.jpg)

![SNS_permissions_allow.jpg](./IMAGES/22.6_Using_EventBridge/SNS_permissions_allow.jpg)

  - Example used **SNS full access** for simplicity (not best practice)

- **Result**
  - Daily automated email with Tesla stock price at market close
  - No manual intervention required

- **Key Takeaway**
  - EventBridge enables powerful event-driven and scheduled automation
  - AWS services can be easily chained together
  - Time-based triggers are ideal for reporting, notifications, and maintenance tasks
 
 
 ## [Context](./../context.md)