# 22.4 Understanding alarms 
 
- **Purpose of the Demo**
  - Demonstrates creating **CloudWatch alarms** based on log content
  - Shows how to trigger alerts when specific keywords appear in logs

- **Code Base**
  * [log_an_error.py](./../CODE/CloudWatch/2-AlarmOnMetricFilter/log_an_error.py)
  * [config.json)](./../CODE/CloudWatch/2-AlarmOnMetricFilter/config.json)
  

- **Example Application**

![code_log_error_message.png](./IMAGES/22.4_Understanding_alarms/code_log_error_message.png)

  - Application logs a single message containing the word **ERROR**
  - Uses the same CloudWatch logging setup as the previous example
  - Sends one log entry without handling sequence tokens explicitly

- **Creating a Metric Filter**
  - Navigated to the log group in **CloudWatch Logs**

![metric_filter.png](./IMAGES/22.4_Understanding_alarms/metric_filter.png)

![define_pattern.png](./IMAGES/22.4_Understanding_alarms/define_pattern.png)

  - Created a **metric filter** with pattern: `ERROR`

![test_pattern.png](./IMAGES/22.4_Understanding_alarms/test_pattern.png)

  - Tested the filter against sample log data to confirm matches
  - Metric configuration:
  - 
![assign_metric.png](./IMAGES/22.4_Understanding_alarms/assign_metric.png)

    - Metric name: `ERROR`
    - Metric value: `2`
    - Default value: `0`
    - Unit: None

![error_has_been_created.png](./IMAGES/22.4_Understanding_alarms/error_has_been_created.png)

- **Metric Filter Behavior**
  - Each log entry containing `ERROR` increments the metric by 2
  - Metric is associated directly with the log group

- **Creating an Alarm**

![specify_metric_and_conditions.png](./IMAGES/22.4_Understanding_alarms/specify_metric_and_conditions.png)

  - Created an alarm from the metric filter
  - Statistic used: **Sum**
  - Alarm condition:
    - Trigger when value is **greater than 1**
  - Alarm evaluates data within a 5-minute period

- **Notification Setup**

![configure_actions.png](./IMAGES/22.4_Understanding_alarms/configure_actions.png)

  - Created a new **SNS topic**
  - Subscribed an email address to the topic

![aws_notifications.png](./IMAGES/22.4_Understanding_alarms/aws_notifications.png)

  - Confirmed subscription via email
  - No auto-scaling or remediation actions configured

![add_name_and_descriptions.png](./IMAGES/22.4_Understanding_alarms/add_name_and_descriptions.png)

![preview_and_create.png](./IMAGES/22.4_Understanding_alarms/preview_and_create.png)

![alarm_completed.png](./IMAGES/22.4_Understanding_alarms/alarm_completed.png)

- **Select Metric**
![create_alarm_button.png](./IMAGES/22.4_Understanding_alarms/create_alarm_button.png)

![select_metric.png](./IMAGES/22.4_Understanding_alarms/select_metric.png)

- **Testing the Alarm**
- 
![run_python_code.png](./IMAGES/22.4_Understanding_alarms/run_python_code.png)

  - Executed the application to generate ERROR log entries
  - Log stream created and messages written successfully
  - CloudWatch detected metric data points
  - Alarm transitioned from **INSUFFICIENT_DATA** to **ALARM**

- **Alert Delivery**
  - Email notification sent when alarm entered ALARM state
  - Email included a link to view the alarm in CloudWatch

- **Additional Capabilities**
  - Metric filters can use **regular expressions**
  - Alarms can trigger:
    - Email notifications
    - Lambda functions
    - Automated remediation actions

- **Key Takeaway**
  - CloudWatch can generate alarms from log patterns
  - Metric filters bridge logs and metrics
  - Alarms enable proactive monitoring and automated responses
 
 
 ## [Context](./../context.md)