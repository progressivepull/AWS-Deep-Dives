# 23.4 Using clusters 
 
- **Purpose of the Demo**
  - Demonstrates deploying a container from **ECR** to **ECS Fargate**

  ![ecs_clusters.jpg](./IMAGES/23.4_Using_clusters/ecs_clusters.jpg)

  - Shows how to use clusters, task definitions, and tasks together

- **Cluster Creation**

![networking_only_template.jpg](./IMAGES/23.4_Using_clusters/networking_only_template.jpg)
  - Created a **networking-only ECS cluster**
  - Cluster type designed for **Fargate**
  - Fargate provides **serverless container execution**
  - Used an existing VPC (no new VPC created)

![configure_cluster.jpg](./IMAGES/23.4_Using_clusters/configure_cluster.jpg)

![cluster_define.jpg](./IMAGES/23.4_Using_clusters/cluster_define.jpg)

  - Cluster named **ADGU cluster**

- **Task Definition Creation**

![task_definitions.jpg](./IMAGES/23.4_Using_clusters/task_definitions.jpg)

![select_launch_type_compatibility.jpg](./IMAGES/23.4_Using_clusters/select_launch_type_compatibility.jpg)

![configure_tash_and_container_definitions.jpg](./IMAGES/23.4_Using_clusters/configure_tash_and_container_definitions.jpg)

![configuration_json.jpg](./IMAGES/23.4_Using_clusters/configuration_json.jpg)

  - Created a new **Fargate task definition**
  - Task name: **ADGU Web Server Task**
  - Operating system: **Linux**
  - Execution role: **ECS Task Execution Role**
  - Resource allocation:
    - **0.5 GB memory**
    - **0.25 vCPU**

- **Container Configuration**
  - Container image pulled from **Amazon ECR**
  - Image URI provided from the previously created repository
  - Container name: **ADGU container**
  - Default container settings used

- **Task Definition Completion**

![run_new_task_button.jpg](./IMAGES/23.4_Using_clusters/run_new_task_button.jpg)

  - No service mesh, proxy, FireLens, or volumes configured
  - Task definition successfully created
  - JSON definition automatically generated by ECS

- **Running the Task**

![run_task_form.jpg](./IMAGES/23.4_Using_clusters/run_task_form.jpg)

  - Launched a task from the **ADGU cluster**
  - Launch type: **Fargate**
  - Platform: **Linux**
  - Selected default VPC and subnet (1B)
  - Created a new security group automatically

![configure_security_groups.png](./IMAGES/23.4_Using_clusters/configure_security_groups.png)

    - Allowed inbound traffic on **port 80**

- **Verification**
  - Task entered a running state

  ![public_ip.jpg](./IMAGES/23.4_Using_clusters/public_ip.jpg)

  - ECS assigned a **public IP address**

![chrome.jpg](./IMAGES/23.4_Using_clusters/chrome.jpg)

  - Accessed the container via browser
  - Confirmed Apache web server responded successfully

- **Architecture Highlights**

![container.jpg](./IMAGES/23.4_Using_clusters/container.jpg)

  - Container runs fully on **Fargate**
  - No EC2 instances or container hosts managed by the user
  - Image sourced directly from **Elastic Container Registry**

- **Key Takeaway**
  - ECS + ECR + Fargate enable fast, serverless container deployments
  - Ideal for running web apps and microservices
  - Provides a middle ground between EC2-based containers and fully serverless Lambda solutions
 
 
 ## [Context](./../context.md)