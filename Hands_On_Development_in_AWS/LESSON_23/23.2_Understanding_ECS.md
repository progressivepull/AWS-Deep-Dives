# 23.2 Understanding ECS 
 
 
 
 ## [Context](./../context.md)- **What is Amazon ECS**
  - A service for creating, running, and managing containers
  - Designed to run **secure, reliable, and scalable** container workloads

- **Core ECS Concepts**
  - **Cluster**
    - Logical grouping where containers run
  - **Task Definition**
    - Blueprint that defines containers, resources, and permissions
  - **Task**
    - A running instance of a task definition
  - **Service**
    - Maintains and manages a desired number of tasks in a cluster

- **Launch Types**
  - **Fargate**
    - Serverless container execution
    - No server or infrastructure management
  - **EC2**
    - Containers run on user-managed EC2 instances
    - Requires managing cluster capacity and instances

- **Fargate Characteristics**
  - No EC2 instance management
  - Automatic placement and scaling
  - Built-in security isolation
  - Ideal for:
    - Small or bursty workloads
    - Batch jobs
    - Workloads with low operational overhead

- **EC2 Launch Type Characteristics**
  - Full control over EC2 instances
  - Suitable for:
    - High and consistent CPU/memory usage
    - Cost-optimized workloads
    - Applications requiring **persistent storage**
    - Direct infrastructure management

- **Container Placement**
  - Fargate handles placement automatically
  - EC2 places containers on registered container instances

- **IAM Integration**
  - Tasks receive permissions through **IAM roles**
  - Roles are defined in task definitions
  - Enables fine-grained access to AWS services

- **Image Management**
  - Integrated with **Amazon Elastic Container Registry (ECR)**
  - Supports private repositories
  - Compatible with Docker and OCI images

- **CI/CD Integration**
  - Supports automated pipelines (e.g., CodePipeline)
  - Typical flow:
    - Code commit
    - Build Docker image
    - Push image to ECR
    - Update ECS service with new image

- **ECS Agent (EC2 Launch Type)**
  - Required on EC2 container instances
  - Registers instances with ECS clusters
  - Included in ECS-optimized AMIs
  - Open source and installable on-premises (with AWS connectivity)

- **Developer Tools**
  - AWS Console and CLI
  - CloudFormation
  - **AWS Copilot CLI**
  - **App2Container** for .NET and Java
  - Docker Desktop integration
  - AWS Cloud Development Kit (CDK)
  - AWS SDKs

- **Monitoring and Logging**
  - Integrated with **CloudWatch Logs and Alarms**
  - Supports CloudWatch Events and EventBridge
  - Logs stored centrally instead of inside containers
  - CloudTrail tracks ECS configuration changes

- **Amazon Elastic Container Registry (ECR)**
  - Managed container image registry
  - Secure, scalable, and reliable
  - Features include:
    - Private repositories
    - Lifecycle policies
    - Vulnerability scanning
    - Cross-region and cross-account replication

- **ECR Components**
  - **Registry**
    - Collection of repositories in an AWS account
  - **Repositories**
    - Store container images and OCI artifacts

- **Key Takeaway**
  - ECS provides flexible container orchestration options
  - Fargate simplifies operations; EC2 offers greater control
  - Deep integration with AWS services supports production-grade container workloads
